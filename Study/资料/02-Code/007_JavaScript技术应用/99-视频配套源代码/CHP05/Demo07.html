<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>正则表达式验证表单</title>
		<style type="text/css">
			.errInfo{color: red; font-size: 12px;}
			.errInfo img{ vertical-align:middle;}
		</style>
		<script type="text/javascript">
			function CheckAccount()
			{
				var exp = /^[a-zA-Z][a-zA-Z0-9]{3,15}$/;
				var acc = document.getElementById("txtAccount").value;
				var objInfo = document.getElementById("spanAccount");
				if(exp.test(acc))
				{
					objInfo.innerHTML = "<img src='img/li_ok.gif' />";
					return true;
				}
				else
				{
					objInfo.innerHTML = "<img src='img/li_err.gif' /> 由英文字母和数字组成的4-16位字符,以字母开头";
					return false;
				}
			}
			function CheckNickName()
			{
				var exp = /[\u4e00-\u9fa5]{2,8}/;
				var nickname = document.getElementById("txtNickName").value;
				var objInfo = document.getElementById("spanNickName");
				if(exp.test(nickname))
				{
					objInfo.innerHTML = "<img src='img/li_ok.gif' />";
					return true;
				}
				else
				{
					objInfo.innerHTML = "<img src='img/li_err.gif' /> 由2-8个汉字组成";
					return false;
				}
			}
			function CheckIdCard()
			{
				var exp = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
				var idCard = document.getElementById("txtIDCard").value;
				var objInfo = document.getElementById("spanIDCard");
				if(exp.test(idCard))
				{
					objInfo.innerHTML = "<img src='img/li_ok.gif' />";
					return true;
				}
				else
				{
					objInfo.innerHTML = "<img src='img/li_err.gif' /> 由15位或18位数字组成,最后一位可以是X";
					return false;
				}			
			}
			function CheckMail()
			{
				var exp = /^\w+@\w+\.[a-zA-z]{2,3}(\.[a-zA-z]{2,3})?$/;
				var email = document.getElementById("txtMail").value;
				var objInfo = document.getElementById("spanMail");
				if(exp.test(email))
				{
					objInfo.innerHTML = "<img src='img/li_ok.gif' />";
					return true;
				}
				else
				{
					objInfo.innerHTML = "<img src='img/li_err.gif' /> 邮箱账号@域名 如:good@qq.com";
					return false;
				}				
			}
			function CheckPwd()
			{
				var exp = /^[a-zA-Z0-9]{4,10}$/;
				var pwd = document.getElementById("txtPwd").value;
				var objInfo = document.getElementById("spanPwd");
				if(exp.test(pwd))
				{
					objInfo.innerHTML = "<img src='img/li_ok.gif' />";
					return true;
				}
				else
				{
					objInfo.innerHTML = "<img src='img/li_err.gif' /> 由英文字母和数字组成4-10位字符";
					return false;
				}				 
			}
			function CheckPwdOk()
			{
				var pwd = document.getElementById("txtPwd").value;
				var pwdok = document.getElementById("txtPwdOk").value;
				var objInfo = document.getElementById("spanPwdOk");
				if(pwd.length==0 && pwdok.length == 0)
					return;
				if(pwd == pwdok)
				{
					objInfo.innerHTML = "<img src='img/li_ok.gif' />";
					return true;
				}
				else
				{
					objInfo.innerHTML = "<img src='img/li_err.gif' /> 密码和密码确认不一致";
					return false;
				}
			}
			function CheckMobile()
			{
				var exp = /^(13|15|18)\d{9}$/;
				var phone = document.getElementById("txtPhone").value;
				var objInfo = document.getElementById("spanPhone");
				if(exp.test(phone))
				{
					objInfo.innerHTML = "<img src='img/li_ok.gif' />";
					return true;
				}
				else
				{
					objInfo.innerHTML = "<img src='img/li_err.gif' /> 由11位数字组成,以13,15,18开头";
					return false;
				}				
			}
			function CheckBirth()
			{
				var exp = /^((19\d{2})|(200\d{1}))-((0?[1-9])|(1[0-2]))-((0?[1-9])|([1-2]\d)|(3[0-1]))$/;
				var birth = document.getElementById("txtBirth").value;
				var objInfo = document.getElementById("spanBirth");
				if(exp.test(birth))
				{
					objInfo.innerHTML = "<img src='img/li_ok.gif' />";
					return true;
				}
				else
				{
					objInfo.innerHTML = "<img src='img/li_err.gif' /> 日期在1900-2009之间,如:1985-08-09";
					return false;
				}				
			}
			function reg()
			{
				if(CheckAccount() & CheckNickName() & CheckIdCard() & CheckMail()
				& CheckPwd() & CheckPwdOk() & CheckMobile() & CheckBirth())
					return true;
				else
					return false;
			}
		</script>
	</head>
	<body>
		<form action="Demo07_01.html" onsubmit="return reg();">
		<table width="1000" align="center">
			<caption>用户注册</caption>
			<tr>
				<td width="300" align="right" height="30">用户名:</td>
				<td width="700">
					<input type="text" id="txtAccount" onblur="CheckAccount();">
					<span id="spanAccount" class="errInfo">由英文字母和数字组成的4-16位字符,以字母开头</span>
				</td>
			</tr>
			<tr>
				<td width="300" align="right" height="30">昵称:</td>
				<td width="700"><input type="text" id="txtNickName" onblur="CheckNickName();">
					<span id="spanNickName" class="errInfo">由2-8个汉字组成</span>
				</td>
			</tr>
			<tr>
				<td width="300" align="right" height="30">身份证号:</td>
				<td width="700"><input type="text" id="txtIDCard" onblur="CheckIdCard();">
					<span id="spanIDCard" class="errInfo">由15位或18位数字组成,最后一位可以是X</span>
				</td>
			</tr>
			<tr>
				<td width="300" align="right" height="30">邮箱:</td>
				<td width="700"><input type="text" id="txtMail" onblur="CheckMail();">
					<span id="spanMail" class="errInfo">邮箱账号@域名 如:good@qq.com</span>
				</td>
			</tr>
			<tr>
				<td width="300" align="right" height="30">密码:</td>
				<td width="700"><input type="password" id="txtPwd" onblur="CheckPwd();">
					<span id="spanPwd" class="errInfo">由英文字母和数字组成4-10位字符</span>
				</td>
			</tr>
			<tr>
				<td width="300" align="right" height="30">密码确认:</td>
				<td width="700"><input type="password" id="txtPwdOk" onblur="CheckPwdOk();">
					<span id="spanPwdOk" class="errInfo"></span>
				</td>
			</tr>
			<tr>
				<td width="300" align="right" height="30">手机号码:</td>
				<td width="700"><input type="text" id="txtPhone" onblur="CheckMobile();">
					<span id="spanPhone" class="errInfo">由11位数字组成,以13,15,18开头</span>
				</td>
			</tr>			
			<tr>
				<td width="300" align="right" height="30">出生日期:</td>
				<td width="700"><input type="text" id="txtBirth" onblur="CheckBirth();" >
					<span id="spanBirth" class="errInfo">日期在1900-2009之间,如:1985-08-09</span>
				</td>
			</tr>
			<tr>
				<td width="300" align="right" height="30">&nbsp;</td>
				<td width="700">
					<input type="submit" value="注册" />
					<input type="reset" value="取消" />
				</td>
			</tr>
		</table>
		
		</form>		
	</body>
</html>
